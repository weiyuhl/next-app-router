# åå°ç®¡ç†ç³»ç»Ÿå®æ–½æŒ‡å—

## ğŸ“‹ ç›®å½•

1. [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
2. [è¯¦ç»†å®æ–½æ­¥éª¤](#è¯¦ç»†å®æ–½æ­¥éª¤)
3. [ä»£ç ç¤ºä¾‹](#ä»£ç ç¤ºä¾‹)
4. [ç»„ä»¶å¼€å‘æŒ‡å—](#ç»„ä»¶å¼€å‘æŒ‡å—)
5. [API è®¾è®¡](#api-è®¾è®¡)
6. [æ•°æ®åº“è®¾è®¡](#æ•°æ®åº“è®¾è®¡)
7. [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®å‡†å¤‡

ç¡®ä¿æ‚¨çš„å¼€å‘ç¯å¢ƒæ»¡è¶³ä»¥ä¸‹è¦æ±‚ï¼š

```bash
Node.js: >= 18.17
npm: >= 9.0
Next.js: 15.5.0
TypeScript: ^5
```

### å®‰è£…é¢å¤–ä¾èµ–

```bash
# è¡¨å•å¤„ç†
npm install react-hook-form zod @hookform/resolvers

# æ•°æ®å¯è§†åŒ–
npm install recharts

# çŠ¶æ€ç®¡ç†
npm install zustand

# æ—¥æœŸå¤„ç†
npm install date-fns

# å¯Œæ–‡æœ¬ç¼–è¾‘å™¨
npm install @tiptap/react @tiptap/starter-kit

# è¡¨æ ¼ç»„ä»¶
npm install @tanstack/react-table

# è®¤è¯ï¼ˆå¯é€‰ï¼‰
npm install next-auth
# æˆ–
npm install @clerk/nextjs
```

---

## ğŸ“ è¯¦ç»†å®æ–½æ­¥éª¤

### æ­¥éª¤ 1ï¼šé‡æ„ç°æœ‰ç»“æ„ä¸ºè·¯ç”±ç»„

#### 1.1 åˆ›å»ºå‰å°è·¯ç”±ç»„

```bash
# åˆ›å»º (frontend) è·¯ç”±ç»„ç›®å½•
mkdir -p src/app/\(frontend\)

# ç§»åŠ¨ç°æœ‰å‰å°é¡µé¢åˆ° (frontend) è·¯ç”±ç»„
# æ³¨æ„ï¼šåœ¨ Windows ä¸Šä½¿ç”¨ PowerShell æˆ– Git Bash
```

**æ–‡ä»¶ç§»åŠ¨æ¸…å•ï¼š**

```
ç§»åŠ¨å‰ï¼š
src/app/
â”œâ”€â”€ page.tsx
â”œâ”€â”€ about/
â”œâ”€â”€ code-snap/
â””â”€â”€ qingyu/

ç§»åŠ¨åï¼š
src/app/(frontend)/
â”œâ”€â”€ page.tsx
â”œâ”€â”€ about/
â”œâ”€â”€ code-snap/
â””â”€â”€ qingyu/
```

#### 1.2 åˆ›å»ºå‰å°å¸ƒå±€

```typescript
// src/app/(frontend)/layout.tsx
import type { Metadata } from "next";
import ExternalLinkInterceptor from "@/components/ExternalLinkInterceptor";
import Header from "@/components/Header";
import Footer from "@/components/Footer";
import MusicPlayer from "@/components/MusicPlayer";
import BackToTop from "@/components/BackToTop";

export const metadata: Metadata = {
  title: "å’é›ªè½©é˜",
  description: "å’é›ªè½©é˜ - ä¸€ä¸ªä¼˜é›…çš„æ–‡å­¦ä¸è‰ºæœ¯ç©ºé—´",
};

export default function FrontendLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  return (
    <>
      <ExternalLinkInterceptor />
      <Header />
      <main className="pt-20 flex-1">
        {children}
      </main>
      <Footer />
      <MusicPlayer />
      <BackToTop />
    </>
  );
}
```

#### 1.3 æ›´æ–°æ ¹å¸ƒå±€

```typescript
// src/app/layout.tsx
import "./globals.css";

export default function RootLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  return (
    <html lang="zh-CN">
      <head>
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossOrigin="anonymous" />
        <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;500;600;700&display=swap" rel="stylesheet" />
      </head>
      <body className="antialiased flex flex-col min-h-screen">
        {children}
      </body>
    </html>
  );
}
```

### æ­¥éª¤ 2ï¼šåˆ›å»ºåå°è·¯ç”±ç»„å’Œå¸ƒå±€

#### 2.1 åˆ›å»ºåå°ç›®å½•ç»“æ„

```bash
# åˆ›å»ºåå°è·¯ç”±ç»„å’Œå­ç›®å½•
mkdir -p src/app/\(admin\)/dashboard
mkdir -p src/app/\(admin\)/content/articles
mkdir -p src/app/\(admin\)/users
mkdir -p src/app/\(admin\)/media
mkdir -p src/app/\(admin\)/analytics
mkdir -p src/app/\(admin\)/settings
```

#### 2.2 åˆ›å»ºåå°ä¸»å¸ƒå±€

```typescript
// src/app/(admin)/layout.tsx
import { redirect } from "next/navigation";
import { cookies } from "next/headers";
import AdminSidebar from "@/components/admin/AdminSidebar";
import AdminTopBar from "@/components/admin/AdminTopBar";

export const metadata = {
  title: {
    template: "%s | åå°ç®¡ç†",
    default: "åå°ç®¡ç†",
  },
};

async function checkAuth() {
  const cookieStore = await cookies();
  const token = cookieStore.get("auth_token");
  
  if (!token) {
    redirect("/login");
  }
  
  // è¿™é‡Œæ·»åŠ  token éªŒè¯é€»è¾‘
  return true;
}

export default async function AdminLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  await checkAuth();

  return (
    <div className="flex h-screen bg-gray-50 dark:bg-gray-900">
      {/* ä¾§è¾¹æ  */}
      <AdminSidebar />
      
      {/* ä¸»å†…å®¹åŒº */}
      <div className="flex-1 flex flex-col overflow-hidden">
        {/* é¡¶éƒ¨å¯¼èˆªæ  */}
        <AdminTopBar />
        
        {/* é¡µé¢å†…å®¹ */}
        <main className="flex-1 overflow-y-auto bg-background p-6">
          <div className="max-w-7xl mx-auto">
            {children}
          </div>
        </main>
      </div>
    </div>
  );
}
```

### æ­¥éª¤ 3ï¼šåˆ›å»ºè®¤è¯è·¯ç”±ç»„

#### 3.1 åˆ›å»ºè®¤è¯ç›®å½•

```bash
mkdir -p src/app/\(auth\)/login
mkdir -p src/app/\(auth\)/register
mkdir -p src/app/\(auth\)/forgot-password
```

#### 3.2 åˆ›å»ºè®¤è¯å¸ƒå±€

```typescript
// src/app/(auth)/layout.tsx
import Image from "next/image";

export const metadata = {
  title: {
    template: "%s | å’é›ªè½©é˜",
    default: "ç™»å½•",
  },
};

export default function AuthLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  return (
    <div className="min-h-screen flex">
      {/* å·¦ä¾§ï¼šå“ç‰Œå±•ç¤º */}
      <div className="hidden lg:flex lg:w-1/2 bg-gradient-to-br from-primary via-blue-600 to-purple-600 p-12 flex-col justify-between">
        <div>
          <h1 className="text-4xl font-bold text-white mb-4">å’é›ªè½©é˜</h1>
          <p className="text-blue-100 text-lg">
            ä¸€ä¸ªä¼˜é›…çš„æ–‡å­¦ä¸è‰ºæœ¯ç©ºé—´
          </p>
        </div>
        
        <div className="space-y-6">
          <div className="bg-white/10 backdrop-blur-sm rounded-lg p-6">
            <p className="text-white text-sm">
              "æ–‡ç« åƒå¤äº‹ï¼Œå¾—å¤±å¯¸å¿ƒçŸ¥"
            </p>
            <p className="text-blue-100 text-xs mt-2">â€”â€” æœç”«</p>
          </div>
        </div>
      </div>
      
      {/* å³ä¾§ï¼šè®¤è¯è¡¨å• */}
      <div className="flex-1 flex items-center justify-center p-8">
        <div className="w-full max-w-md">
          {children}
        </div>
      </div>
    </div>
  );
}
```

#### 3.3 åˆ›å»ºç™»å½•é¡µé¢

```typescript
// src/app/(auth)/login/page.tsx
"use client";

import { useState } from "react";
import { useRouter } from "next/navigation";
import Link from "next/link";
import { Button } from "@/components/ui/button";
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card";
import { Input } from "@/components/ui/input";
import { Label } from "@/components/ui/label";
import { Mail, Lock, Eye, EyeOff } from "lucide-react";

export default function LoginPage() {
  const router = useRouter();
  const [showPassword, setShowPassword] = useState(false);
  const [loading, setLoading] = useState(false);
  const [formData, setFormData] = useState({
    email: "",
    password: "",
  });

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    setLoading(true);

    try {
      // è¿™é‡Œæ·»åŠ ç™»å½• API è°ƒç”¨
      const response = await fetch("/api/auth/login", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(formData),
      });

      if (response.ok) {
        router.push("/dashboard");
      } else {
        alert("ç™»å½•å¤±è´¥ï¼Œè¯·æ£€æŸ¥é‚®ç®±å’Œå¯†ç ");
      }
    } catch (error) {
      console.error("ç™»å½•é”™è¯¯:", error);
      alert("ç™»å½•å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•");
    } finally {
      setLoading(false);
    }
  };

  return (
    <Card className="border-border/50">
      <CardHeader className="space-y-1">
        <CardTitle className="text-2xl font-bold">ç™»å½•</CardTitle>
        <CardDescription>
          è¾“å…¥æ‚¨çš„é‚®ç®±å’Œå¯†ç ä»¥ç™»å½•åå°ç®¡ç†ç³»ç»Ÿ
        </CardDescription>
      </CardHeader>
      <CardContent>
        <form onSubmit={handleSubmit} className="space-y-4">
          <div className="space-y-2">
            <Label htmlFor="email">é‚®ç®±</Label>
            <div className="relative">
              <Mail className="absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground" />
              <Input
                id="email"
                type="email"
                placeholder="your@email.com"
                className="pl-10"
                value={formData.email}
                onChange={(e) => setFormData({ ...formData, email: e.target.value })}
                required
              />
            </div>
          </div>

          <div className="space-y-2">
            <div className="flex items-center justify-between">
              <Label htmlFor="password">å¯†ç </Label>
              <Link
                href="/forgot-password"
                className="text-sm text-primary hover:underline"
              >
                å¿˜è®°å¯†ç ï¼Ÿ
              </Link>
            </div>
            <div className="relative">
              <Lock className="absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground" />
              <Input
                id="password"
                type={showPassword ? "text" : "password"}
                placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
                className="pl-10 pr-10"
                value={formData.password}
                onChange={(e) => setFormData({ ...formData, password: e.target.value })}
                required
              />
              <button
                type="button"
                onClick={() => setShowPassword(!showPassword)}
                className="absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground"
              >
                {showPassword ? (
                  <EyeOff className="w-4 h-4" />
                ) : (
                  <Eye className="w-4 h-4" />
                )}
              </button>
            </div>
          </div>

          <Button type="submit" className="w-full" disabled={loading}>
            {loading ? "ç™»å½•ä¸­..." : "ç™»å½•"}
          </Button>

          <div className="text-center text-sm text-muted-foreground">
            è¿˜æ²¡æœ‰è´¦å·ï¼Ÿ{" "}
            <Link href="/register" className="text-primary hover:underline">
              ç«‹å³æ³¨å†Œ
            </Link>
          </div>
        </form>
      </CardContent>
    </Card>
  );
}
```

---

## ğŸ’» ä»£ç ç¤ºä¾‹

### ç¤ºä¾‹ 1ï¼šåå°ä¾§è¾¹æ ç»„ä»¶

```typescript
// src/components/admin/AdminSidebar.tsx
"use client";

import { useState } from "react";
import Link from "next/link";
import { usePathname } from "next/navigation";
import {
  LayoutDashboard,
  FileText,
  Users,
  Image as ImageIcon,
  BarChart,
  Settings,
  ChevronDown,
  ChevronRight,
} from "lucide-react";

interface NavItem {
  title: string;
  icon: any;
  href?: string;
  children?: {
    title: string;
    href: string;
  }[];
}

const navigation: NavItem[] = [
  {
    title: "ä»ªè¡¨ç›˜",
    icon: LayoutDashboard,
    href: "/dashboard",
  },
  {
    title: "å†…å®¹ç®¡ç†",
    icon: FileText,
    children: [
      { title: "æ–‡ç« ç®¡ç†", href: "/content/articles" },
      { title: "åˆ†ç±»ç®¡ç†", href: "/content/categories" },
      { title: "æ ‡ç­¾ç®¡ç†", href: "/content/tags" },
    ],
  },
  {
    title: "ç”¨æˆ·ç®¡ç†",
    icon: Users,
    children: [
      { title: "ç”¨æˆ·åˆ—è¡¨", href: "/users" },
      { title: "è§’è‰²ç®¡ç†", href: "/users/roles" },
      { title: "æƒé™ç®¡ç†", href: "/users/permissions" },
    ],
  },
  {
    title: "åª’ä½“åº“",
    icon: ImageIcon,
    href: "/media",
  },
  {
    title: "æ•°æ®åˆ†æ",
    icon: BarChart,
    href: "/analytics",
  },
  {
    title: "ç³»ç»Ÿè®¾ç½®",
    icon: Settings,
    href: "/settings",
  },
];

export default function AdminSidebar() {
  const pathname = usePathname();
  const [expandedItems, setExpandedItems] = useState<string[]>([]);

  const toggleExpand = (title: string) => {
    setExpandedItems((prev) =>
      prev.includes(title)
        ? prev.filter((item) => item !== title)
        : [...prev, title]
    );
  };

  const isActive = (href: string) => pathname === href;
  const isParentActive = (children?: { href: string }[]) =>
    children?.some((child) => pathname.startsWith(child.href));

  return (
    <aside className="w-64 bg-card border-r border-border flex-shrink-0">
      {/* Logo */}
      <div className="h-16 flex items-center px-6 border-b border-border">
        <Link href="/dashboard" className="flex items-center space-x-2">
          <div className="w-8 h-8 bg-primary rounded-lg flex items-center justify-center">
            <span className="text-white font-bold text-lg">å’</span>
          </div>
          <span className="font-semibold text-lg">å’é›ªè½©é˜</span>
        </Link>
      </div>

      {/* Navigation */}
      <nav className="p-4 space-y-1">
        {navigation.map((item) => (
          <div key={item.title}>
            {item.href ? (
              // å•çº§èœå•
              <Link
                href={item.href}
                className={`flex items-center space-x-3 px-3 py-2 rounded-lg transition-colors ${
                  isActive(item.href)
                    ? "bg-primary text-primary-foreground"
                    : "text-muted-foreground hover:bg-muted hover:text-foreground"
                }`}
              >
                <item.icon className="w-5 h-5" />
                <span className="font-medium">{item.title}</span>
              </Link>
            ) : (
              // å¤šçº§èœå•
              <div>
                <button
                  onClick={() => toggleExpand(item.title)}
                  className={`w-full flex items-center justify-between px-3 py-2 rounded-lg transition-colors ${
                    isParentActive(item.children)
                      ? "bg-muted text-foreground"
                      : "text-muted-foreground hover:bg-muted hover:text-foreground"
                  }`}
                >
                  <div className="flex items-center space-x-3">
                    <item.icon className="w-5 h-5" />
                    <span className="font-medium">{item.title}</span>
                  </div>
                  {expandedItems.includes(item.title) ? (
                    <ChevronDown className="w-4 h-4" />
                  ) : (
                    <ChevronRight className="w-4 h-4" />
                  )}
                </button>

                {expandedItems.includes(item.title) && item.children && (
                  <div className="ml-8 mt-1 space-y-1">
                    {item.children.map((child) => (
                      <Link
                        key={child.href}
                        href={child.href}
                        className={`block px-3 py-2 rounded-lg text-sm transition-colors ${
                          isActive(child.href)
                            ? "bg-primary text-primary-foreground"
                            : "text-muted-foreground hover:bg-muted hover:text-foreground"
                        }`}
                      >
                        {child.title}
                      </Link>
                    ))}
                  </div>
                )}
              </div>
            )}
          </div>
        ))}
      </nav>
    </aside>
  );
}
```

### ç¤ºä¾‹ 2ï¼šåå°é¡¶éƒ¨å¯¼èˆªæ 

```typescript
// src/components/admin/AdminTopBar.tsx
"use client";

import { Bell, Search, User, LogOut, Settings } from "lucide-react";
import { Button } from "@/components/ui/button";
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuLabel,
  DropdownMenuSeparator,
  DropdownMenuTrigger,
} from "@/components/ui/dropdown-menu";
import { useRouter } from "next/navigation";

export default function AdminTopBar() {
  const router = useRouter();

  const handleLogout = async () => {
    // è°ƒç”¨ç™»å‡º API
    await fetch("/api/auth/logout", { method: "POST" });
    router.push("/login");
  };

  return (
    <header className="h-16 bg-card border-b border-border flex items-center justify-between px-6">
      {/* æœç´¢æ  */}
      <div className="flex-1 max-w-xl">
        <div className="relative">
          <Search className="absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground" />
          <input
            type="text"
            placeholder="æœç´¢..."
            className="w-full pl-10 pr-4 py-2 bg-muted/50 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20"
          />
        </div>
      </div>

      {/* å³ä¾§æ“ä½œ */}
      <div className="flex items-center space-x-4">
        {/* é€šçŸ¥ */}
        <Button variant="ghost" size="icon" className="relative">
          <Bell className="w-5 h-5" />
          <span className="absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"></span>
        </Button>

        {/* ç”¨æˆ·èœå• */}
        <DropdownMenu>
          <DropdownMenuTrigger asChild>
            <Button variant="ghost" className="flex items-center space-x-2">
              <div className="w-8 h-8 bg-primary rounded-full flex items-center justify-center">
                <User className="w-4 h-4 text-primary-foreground" />
              </div>
              <span className="text-sm font-medium">ç®¡ç†å‘˜</span>
            </Button>
          </DropdownMenuTrigger>
          <DropdownMenuContent align="end" className="w-56">
            <DropdownMenuLabel>æˆ‘çš„è´¦æˆ·</DropdownMenuLabel>
            <DropdownMenuSeparator />
            <DropdownMenuItem>
              <User className="w-4 h-4 mr-2" />
              ä¸ªäººèµ„æ–™
            </DropdownMenuItem>
            <DropdownMenuItem>
              <Settings className="w-4 h-4 mr-2" />
              è´¦æˆ·è®¾ç½®
            </DropdownMenuItem>
            <DropdownMenuSeparator />
            <DropdownMenuItem onClick={handleLogout} className="text-red-600">
              <LogOut className="w-4 h-4 mr-2" />
              é€€å‡ºç™»å½•
            </DropdownMenuItem>
          </DropdownMenuContent>
        </DropdownMenu>
      </div>
    </header>
  );
}
```

### ç¤ºä¾‹ 3ï¼šä»ªè¡¨ç›˜ï¼ˆå¹¶è¡Œè·¯ç”±ï¼‰

```typescript
// src/app/(admin)/dashboard/layout.tsx
export default function DashboardLayout({
  stats,
  charts,
  activities,
}: {
  stats: React.ReactNode;
  charts: React.ReactNode;
  activities: React.ReactNode;
}) {
  return (
    <div className="space-y-6">
      <div>
        <h1 className="text-3xl font-bold">ä»ªè¡¨ç›˜</h1>
        <p className="text-muted-foreground mt-2">
          æ¬¢è¿å›æ¥ï¼è¿™æ˜¯æ‚¨çš„æ•°æ®æ¦‚è§ˆ
        </p>
      </div>

      {/* ç»Ÿè®¡å¡ç‰‡ */}
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
        {stats}
      </div>

      {/* å›¾è¡¨ */}
      <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
        {charts}
      </div>

      {/* æ´»åŠ¨æ—¥å¿— */}
      <div>{activities}</div>
    </div>
  );
}
```

```typescript
// src/app/(admin)/dashboard/@stats/page.tsx
import { Card, CardContent } from "@/components/ui/card";
import { Users, FileText, Eye, MessageSquare } from "lucide-react";

export default function StatsSlot() {
  const stats = [
    {
      title: "æ€»ç”¨æˆ·æ•°",
      value: "2,543",
      change: "+12.5%",
      icon: Users,
      color: "text-blue-600",
      bgColor: "bg-blue-100",
    },
    {
      title: "æ–‡ç« æ€»æ•°",
      value: "1,234",
      change: "+8.2%",
      icon: FileText,
      color: "text-green-600",
      bgColor: "bg-green-100",
    },
    {
      title: "æ€»æµè§ˆé‡",
      value: "45.2K",
      change: "+23.1%",
      icon: Eye,
      color: "text-purple-600",
      bgColor: "bg-purple-100",
    },
    {
      title: "è¯„è®ºæ€»æ•°",
      value: "892",
      change: "+5.4%",
      icon: MessageSquare,
      color: "text-orange-600",
      bgColor: "bg-orange-100",
    },
  ];

  return (
    <>
      {stats.map((stat, index) => (
        <Card key={index}>
          <CardContent className="p-6">
            <div className="flex items-center justify-between">
              <div>
                <p className="text-sm text-muted-foreground mb-1">
                  {stat.title}
                </p>
                <p className="text-2xl font-bold">{stat.value}</p>
                <p className="text-sm text-green-600 mt-2">{stat.change}</p>
              </div>
              <div className={`w-12 h-12 ${stat.bgColor} rounded-lg flex items-center justify-center`}>
                <stat.icon className={`w-6 h-6 ${stat.color}`} />
              </div>
            </div>
          </CardContent>
        </Card>
      ))}
    </>
  );
}
```

### ç¤ºä¾‹ 4ï¼šå†…å®¹ç®¡ç†ï¼ˆåµŒå¥—å¸ƒå±€ï¼‰

```typescript
// src/app/(admin)/content/layout.tsx
"use client";

import Link from "next/link";
import { usePathname } from "next/navigation";
import { Search, Filter, Plus } from "lucide-react";
import { Button } from "@/components/ui/button";

const tabs = [
  { title: "æ–‡ç« ç®¡ç†", href: "/content/articles" },
  { title: "åˆ†ç±»ç®¡ç†", href: "/content/categories" },
  { title: "æ ‡ç­¾ç®¡ç†", href: "/content/tags" },
];

export default function ContentLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  const pathname = usePathname();

  return (
    <div className="space-y-6">
      {/* é¡µé¢æ ‡é¢˜ */}
      <div className="flex items-center justify-between">
        <div>
          <h1 className="text-3xl font-bold">å†…å®¹ç®¡ç†</h1>
          <p className="text-muted-foreground mt-2">
            ç®¡ç†æ‚¨çš„æ–‡ç« ã€åˆ†ç±»å’Œæ ‡ç­¾
          </p>
        </div>
        <Button>
          <Plus className="w-4 h-4 mr-2" />
          æ–°å»ºæ–‡ç« 
        </Button>
      </div>

      {/* äºŒçº§å¯¼èˆª */}
      <div className="border-b border-border">
        <nav className="flex space-x-8">
          {tabs.map((tab) => (
            <Link
              key={tab.href}
              href={tab.href}
              className={`pb-4 border-b-2 transition-colors ${
                pathname.startsWith(tab.href)
                  ? "border-primary text-foreground font-medium"
                  : "border-transparent text-muted-foreground hover:text-foreground"
              }`}
            >
              {tab.title}
            </Link>
          ))}
        </nav>
      </div>

      {/* å·¥å…·æ  */}
      <div className="flex items-center space-x-4">
        <div className="flex-1 max-w-md relative">
          <Search className="absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground" />
          <input
            type="text"
            placeholder="æœç´¢..."
            className="w-full pl-10 pr-4 py-2 bg-muted/50 border border-border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary/20"
          />
        </div>
        <Button variant="outline">
          <Filter className="w-4 h-4 mr-2" />
          ç­›é€‰
        </Button>
      </div>

      {/* å­é¡µé¢å†…å®¹ */}
      <div>{children}</div>
    </div>
  );
}
```

---

## ğŸ¨ ç»„ä»¶å¼€å‘æŒ‡å—

### ç»Ÿè®¡å¡ç‰‡ç»„ä»¶

```typescript
// src/components/admin/StatsCard.tsx
import { Card, CardContent } from "@/components/ui/card";
import { LucideIcon } from "lucide-react";

interface StatsCardProps {
  title: string;
  value: string | number;
  change?: string;
  icon: LucideIcon;
  color?: string;
  bgColor?: string;
}

export function StatsCard({
  title,
  value,
  change,
  icon: Icon,
  color = "text-blue-600",
  bgColor = "bg-blue-100",
}: StatsCardProps) {
  return (
    <Card>
      <CardContent className="p-6">
        <div className="flex items-center justify-between">
          <div>
            <p className="text-sm text-muted-foreground mb-1">{title}</p>
            <p className="text-2xl font-bold">{value}</p>
            {change && (
              <p className="text-sm text-green-600 mt-2">{change}</p>
            )}
          </div>
          <div className={`w-12 h-12 ${bgColor} rounded-lg flex items-center justify-center`}>
            <Icon className={`w-6 h-6 ${color}`} />
          </div>
        </div>
      </CardContent>
    </Card>
  );
}
```

### æ•°æ®è¡¨æ ¼ç»„ä»¶

```typescript
// src/components/admin/DataTable.tsx
"use client";

import { useState } from "react";
import {
  Table,
  TableBody,
  TableCell,
  TableHead,
  TableHeader,
  TableRow,
} from "@/components/ui/table";
import { Button } from "@/components/ui/button";
import { ChevronLeft, ChevronRight } from "lucide-react";

interface Column<T> {
  key: keyof T;
  title: string;
  render?: (value: any, row: T) => React.ReactNode;
}

interface DataTableProps<T> {
  data: T[];
  columns: Column<T>[];
  pageSize?: number;
}

export function DataTable<T extends { id: string | number }>({
  data,
  columns,
  pageSize = 10,
}: DataTableProps<T>) {
  const [currentPage, setCurrentPage] = useState(1);

  const totalPages = Math.ceil(data.length / pageSize);
  const startIndex = (currentPage - 1) * pageSize;
  const endIndex = startIndex + pageSize;
  const currentData = data.slice(startIndex, endIndex);

  return (
    <div className="space-y-4">
      <div className="border rounded-lg">
        <Table>
          <TableHeader>
            <TableRow>
              {columns.map((column) => (
                <TableHead key={String(column.key)}>{column.title}</TableHead>
              ))}
            </TableRow>
          </TableHeader>
          <TableBody>
            {currentData.map((row) => (
              <TableRow key={row.id}>
                {columns.map((column) => (
                  <TableCell key={String(column.key)}>
                    {column.render
                      ? column.render(row[column.key], row)
                      : String(row[column.key])}
                  </TableCell>
                ))}
              </TableRow>
            ))}
          </TableBody>
        </Table>
      </div>

      {/* åˆ†é¡µ */}
      <div className="flex items-center justify-between">
        <p className="text-sm text-muted-foreground">
          æ˜¾ç¤º {startIndex + 1} - {Math.min(endIndex, data.length)} æ¡ï¼Œå…± {data.length} æ¡
        </p>
        <div className="flex items-center space-x-2">
          <Button
            variant="outline"
            size="sm"
            onClick={() => setCurrentPage((p) => Math.max(1, p - 1))}
            disabled={currentPage === 1}
          >
            <ChevronLeft className="w-4 h-4" />
          </Button>
          <span className="text-sm">
            ç¬¬ {currentPage} / {totalPages} é¡µ
          </span>
          <Button
            variant="outline"
            size="sm"
            onClick={() => setCurrentPage((p) => Math.min(totalPages, p + 1))}
            disabled={currentPage === totalPages}
          >
            <ChevronRight className="w-4 h-4" />
          </Button>
        </div>
      </div>
    </div>
  );
}
```

---

## ğŸ”Œ API è®¾è®¡

### è®¤è¯ API

```typescript
// src/app/api/auth/login/route.ts
import { NextRequest, NextResponse } from "next/server";
import { cookies } from "next/headers";

export async function POST(request: NextRequest) {
  try {
    const { email, password } = await request.json();

    // éªŒè¯ç”¨æˆ·å‡­æ®ï¼ˆè¿™é‡Œåº”è¯¥æŸ¥è¯¢æ•°æ®åº“ï¼‰
    // ç¤ºä¾‹ï¼šç®€åŒ–çš„éªŒè¯é€»è¾‘
    if (email === "admin@example.com" && password === "password") {
      // ç”Ÿæˆ tokenï¼ˆå®é™…åº”è¯¥ä½¿ç”¨ JWTï¼‰
      const token = "sample_token_" + Date.now();

      // è®¾ç½® cookie
      const cookieStore = await cookies();
      cookieStore.set("auth_token", token, {
        httpOnly: true,
        secure: process.env.NODE_ENV === "production",
        sameSite: "lax",
        maxAge: 60 * 60 * 24 * 7, // 7 å¤©
      });

      return NextResponse.json({
        success: true,
        user: {
          id: 1,
          email,
          name: "ç®¡ç†å‘˜",
          role: "admin",
        },
      });
    }

    return NextResponse.json(
      { success: false, message: "é‚®ç®±æˆ–å¯†ç é”™è¯¯" },
      { status: 401 }
    );
  } catch (error) {
    return NextResponse.json(
      { success: false, message: "æœåŠ¡å™¨é”™è¯¯" },
      { status: 500 }
    );
  }
}
```

```typescript
// src/app/api/auth/logout/route.ts
import { NextResponse } from "next/server";
import { cookies } from "next/headers";

export async function POST() {
  const cookieStore = await cookies();
  cookieStore.delete("auth_token");

  return NextResponse.json({ success: true });
}
```

### å†…å®¹ç®¡ç† API

```typescript
// src/app/api/articles/route.ts
import { NextRequest, NextResponse } from "next/server";

// è·å–æ–‡ç« åˆ—è¡¨
export async function GET(request: NextRequest) {
  const searchParams = request.nextUrl.searchParams;
  const page = parseInt(searchParams.get("page") || "1");
  const pageSize = parseInt(searchParams.get("pageSize") || "10");

  // è¿™é‡Œåº”è¯¥æŸ¥è¯¢æ•°æ®åº“
  const mockArticles = Array.from({ length: 50 }, (_, i) => ({
    id: i + 1,
    title: `æ–‡ç« æ ‡é¢˜ ${i + 1}`,
    author: "ä½œè€…åç§°",
    status: i % 3 === 0 ? "published" : "draft",
    createdAt: new Date().toISOString(),
  }));

  const startIndex = (page - 1) * pageSize;
  const endIndex = startIndex + pageSize;
  const articles = mockArticles.slice(startIndex, endIndex);

  return NextResponse.json({
    data: articles,
    pagination: {
      page,
      pageSize,
      total: mockArticles.length,
      totalPages: Math.ceil(mockArticles.length / pageSize),
    },
  });
}

// åˆ›å»ºæ–‡ç« 
export async function POST(request: NextRequest) {
  const data = await request.json();

  // è¿™é‡Œåº”è¯¥ä¿å­˜åˆ°æ•°æ®åº“
  const newArticle = {
    id: Date.now(),
    ...data,
    createdAt: new Date().toISOString(),
  };

  return NextResponse.json({
    success: true,
    data: newArticle,
  });
}
```

---

## ğŸ’¾ æ•°æ®åº“è®¾è®¡

### ç”¨æˆ·è¡¨ï¼ˆusersï¼‰

```sql
CREATE TABLE users (
  id SERIAL PRIMARY KEY,
  email VARCHAR(255) UNIQUE NOT NULL,
  password_hash VARCHAR(255) NOT NULL,
  name VARCHAR(100) NOT NULL,
  avatar VARCHAR(500),
  role VARCHAR(50) DEFAULT 'user',
  status VARCHAR(20) DEFAULT 'active',
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

### æ–‡ç« è¡¨ï¼ˆarticlesï¼‰

```sql
CREATE TABLE articles (
  id SERIAL PRIMARY KEY,
  title VARCHAR(255) NOT NULL,
  slug VARCHAR(255) UNIQUE NOT NULL,
  content TEXT,
  excerpt TEXT,
  featured_image VARCHAR(500),
  author_id INTEGER REFERENCES users(id),
  category_id INTEGER REFERENCES categories(id),
  status VARCHAR(20) DEFAULT 'draft',
  published_at TIMESTAMP,
  view_count INTEGER DEFAULT 0,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

### åˆ†ç±»è¡¨ï¼ˆcategoriesï¼‰

```sql
CREATE TABLE categories (
  id SERIAL PRIMARY KEY,
  name VARCHAR(100) NOT NULL,
  slug VARCHAR(100) UNIQUE NOT NULL,
  description TEXT,
  parent_id INTEGER REFERENCES categories(id),
  order_index INTEGER DEFAULT 0,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

### æ ‡ç­¾è¡¨ï¼ˆtagsï¼‰

```sql
CREATE TABLE tags (
  id SERIAL PRIMARY KEY,
  name VARCHAR(50) NOT NULL,
  slug VARCHAR(50) UNIQUE NOT NULL,
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

### æ–‡ç« æ ‡ç­¾å…³è”è¡¨ï¼ˆarticle_tagsï¼‰

```sql
CREATE TABLE article_tags (
  article_id INTEGER REFERENCES articles(id) ON DELETE CASCADE,
  tag_id INTEGER REFERENCES tags(id) ON DELETE CASCADE,
  PRIMARY KEY (article_id, tag_id)
);
```

---

## â“ å¸¸è§é—®é¢˜

### Q1: å¦‚ä½•å¤„ç†è·¯ç”±ç»„çš„ URL è·¯å¾„ï¼Ÿ

**A:** è·¯ç”±ç»„ä½¿ç”¨ `(groupName)` è¯­æ³•ï¼Œæ‹¬å·ä¸­çš„åç§°ä¸ä¼šå‡ºç°åœ¨ URL ä¸­ã€‚

```
æ–‡ä»¶è·¯å¾„: app/(admin)/dashboard/page.tsx
URL è·¯å¾„: /dashboard

æ–‡ä»¶è·¯å¾„: app/(frontend)/about/page.tsx
URL è·¯å¾„: /about
```

### Q2: åµŒå¥—å¸ƒå±€çš„çŠ¶æ€å¦‚ä½•ä¿æŒï¼Ÿ

**A:** Next.js ä¼šè‡ªåŠ¨ä¿æŒå¸ƒå±€ç»„ä»¶çš„çŠ¶æ€ï¼Œåªé‡æ–°æ¸²æŸ“å˜åŒ–çš„éƒ¨åˆ†ã€‚

```typescript
// å¸ƒå±€ç»„ä»¶ä¸­çš„çŠ¶æ€ä¼šä¿æŒ
const [searchTerm, setSearchTerm] = useState("");
// åœ¨å­é¡µé¢åˆ‡æ¢æ—¶ï¼ŒsearchTerm ä¸ä¼šé‡ç½®
```

### Q3: å¹¶è¡Œè·¯ç”±çš„æ§½ä½å¦‚ä½•å‘½åï¼Ÿ

**A:** ä½¿ç”¨ `@slotName` æ ¼å¼åˆ›å»ºæ–‡ä»¶å¤¹ï¼Œåœ¨å¸ƒå±€ä¸­ä½œä¸º props æ¥æ”¶ã€‚

```
app/(admin)/dashboard/
â”œâ”€â”€ @stats/page.tsx      â†’ props.stats
â”œâ”€â”€ @charts/page.tsx     â†’ props.charts
â””â”€â”€ layout.tsx
```

### Q4: å¦‚ä½•å®ç°æƒé™æ§åˆ¶ï¼Ÿ

**A:** ä½¿ç”¨ä¸­é—´ä»¶æˆ–åœ¨å¸ƒå±€ç»„ä»¶ä¸­æ£€æŸ¥æƒé™ã€‚

```typescript
// ä¸­é—´ä»¶æ–¹å¼
export async function middleware(request: NextRequest) {
  const token = request.cookies.get("auth_token");
  if (!token) {
    return NextResponse.redirect(new URL("/login", request.url));
  }
}

// å¸ƒå±€ç»„ä»¶æ–¹å¼
export default async function AdminLayout({ children }) {
  const session = await getServerSession();
  if (!session) {
    redirect("/login");
  }
  return <>{children}</>;
}
```

### Q5: å¦‚ä½•ä¼˜åŒ–å¤§å‹è¡¨æ ¼çš„æ€§èƒ½ï¼Ÿ

**A:** ä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨ã€åˆ†é¡µå’Œæ‡’åŠ è½½ã€‚

```typescript
// 1. åˆ†é¡µ
const [page, setPage] = useState(1);
const pageSize = 20;

// 2. è™šæ‹Ÿæ»šåŠ¨ï¼ˆä½¿ç”¨ react-windowï¼‰
import { FixedSizeList } from "react-window";

// 3. æ‡’åŠ è½½
const { data, isLoading } = useSWR(`/api/articles?page=${page}`);
```

---

## ğŸ“š å‚è€ƒèµ„æº

- [Next.js å®˜æ–¹æ–‡æ¡£](https://nextjs.org/docs)
- [shadcn/ui ç»„ä»¶åº“](https://ui.shadcn.com/)
- [Tailwind CSS æ–‡æ¡£](https://tailwindcss.com/docs)
- [React Hook Form](https://react-hook-form.com/)
- [Zod éªŒè¯åº“](https://zod.dev/)

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2025-11-05  
**ç»´æŠ¤è€…**: å’é›ªè½©é˜å¼€å‘å›¢é˜Ÿ



